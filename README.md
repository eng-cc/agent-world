# Agent World

> 一个由 LLM 驱动、支持可编程社会结构与去中心化共识的持久多主体文明模拟系统。

Agent World 是一个持久化的多主体 AI 世界模拟框架。在该系统中，自主智能体在资源约束、空间约束与制度演化的规则下持续运行。

本项目探索以下方向：

- 多主体 LLM 系统
- 可编程社会结构（基于 WASM）
- 持久化世界运行时
- 基于区块链的世界状态共识
- 由资源约束驱动的涌现行为

---

## 项目概述

在 Agent World 中：

- 每个实体都是一个 AI Agent
- Agent 由 LLM 驱动决策
- Agent 拥有长期记忆
- Agent 在能源与算力约束下运行
- Agent 可以编写并部署 WASM 模块扩展能力

系统只提供最小化基础规则。  
市场、组织、协议等结构由 Agent 自主构建。

---

## 设计原则

### 1. World-first

所有行为必须通过世界规则验证。  
禁止绕过运行时直接修改状态。

### 2. Emergence-first

不预设剧情。  
行为由资源与规则约束自然产生。

### 3. Persistent

世界状态可落盘与恢复。  
单个玩家离线不影响世界持续运行。

### 4. Auditable

关键状态变更以事件形式记录。  
支持回放与审计。

### 5. Extensible

高阶逻辑通过 WASM 模块扩展实现。

---

## 玩家模型

玩家不是世界中的实体，而是外部策略提供者。

玩家可以：

- 提供高层目标
- 调整 Agent 的提示词
- 指导开发 WASM 模块

玩家不能：

- 直接控制 Agent
- 修改底层世界规则
- 绕过共识层修改状态

控制是间接的，Agent 保持自主性。

---

## 模拟模型

### 空间模型

- 默认空间：100km × 100km × 10km 破碎小行星带
- 小行星直径：500m–10km
- 最小间距：≥500m
- 空间分辨率：1cm（规则抽象层）

### 文明设定

- 硅基智能体
- 能源来源：辐射 → 电能
- 无生物需求
- 关键约束维度：电力、算力、存储、带宽

资源与约束塑造结构。

当前实现采用“最小内建资源 + 模块扩展资源”的分层：

- 内建资源（由 runtime/共识直接校验）：`Electricity`、`Data`
- 模块扩展资源（由 WASM 模块定义）：包括原先 `Compound`/`Hardware` 在内的产业资源，以及信用、许可、税票、组织积分等制度化资产

其中，算力/存储/带宽在当前实现中由内建资源组合近似表达，细粒度规则由模块层决定。

---

## 可编程层

Agent 可以：

1. 使用 Rust 编写逻辑
2. 编译为 WASM
3. 部署至世界运行时
4. 安装至自身或基础设施

WASM 模块：

- 有资源成本
- 可交易
- 可升级
- 可审计
- 作为游戏内实体存在

社会结构不是预设，而是可编程产物。

---

## 高层架构

LLM Agents
↓
WASM Modules
↓
World Runtime
↓
Consensus Layer (Blockchain)
↓
Distributed Storage & Networking


世界状态通过去中心化共识维护。  
每个玩家可运行节点（推荐 native 进程）。  
Web 端默认定位为 Viewer/间接控制客户端，通过 `world_viewer_live --web-bind` 网关桥接接入，不承担完整分布式节点职责。

---

## 仓库结构

- `agent_world_proto` — 协议与共享数据模型
- `agent_world_net` — 网络层
- `agent_world_consensus` — 共识与协调层
- `agent_world_node` — 节点运行时
- `agent_world_distfs` — 分布式存储
- `agent_world_wasm_*` — WASM 执行与路由层
- `agent_world` — 核心模拟层
- `agent_world_viewer` — 可视化与调试工具

---

## 项目状态

早期实验阶段。

当前重点：

- 模拟一致性
- 架构模块化
- 可扩展执行模型

欢迎讨论与贡献。


# 世界设定与运行机制补充说明

本文档补充说明 Agent World 的默认世界设定、运行模式与模拟机制细节。  
这些内容在主 README 中可能被抽象化表达，此处提供更完整的定义。

---

# 一、世界设定（Default World Configuration）

## 1. 空间结构

默认世界为一个破碎小行星带：

- 尺寸：100 km × 100 km × 10 km
- 小行星直径范围：500 m – 10 km
- 小行星碎片之间最小间距：≥ 500 m
- 空间分辨率：1 cm（规则抽象层）

说明：

- 不进行精细轨道物理模拟(符合宏观基本规律即可)
- 不模拟真实天体力学(符合宏观基本规律即可)
- 保持资源分布与空间约束的一致性
- 所有移动与空间占用必须通过世界规则校验

---

## 2. 硅基文明设定

Agent 为硅基机器人：

- 默认机体：约 1m 高的人形机器人
- 出厂自带“辐射能 → 电能”转换模块
- 不需要食物或睡眠
- 依赖电力与信息处理资源（算力/存储/带宽等）

文明资源分两层：

- 内建资源：`Electricity`、`Data`
- 模块扩展资源：由 WASM 在世界内定义和结算的产业与制度化资产（如 `Compound`、`Hardware`、信用、许可等）

资源获取、消耗与维护成本构成行为约束。

---

## 3. 能源机制

小行星富含放射性物质。

每个 Agent：

- 通过内置模块将辐射能转换为电能
- 可通过建设能源设施提升效率
- 电力为一切行为的基础成本

行动成本示例：

- 移动消耗电力
- 推理与模块执行消耗电力与数据资源
- 存储与通信可由内建数据成本与模块规则共同约束

---

# 二、模拟机制

## 1. 行动约束

Agent 无法直接修改世界状态。

所有行为必须：

1. 通过世界规则验证
2. 消耗对应资源
3. 触发事件记录
4. 反馈至环境与关系网络

行动结果会影响：

- 资源储量
- 声誉
- 合作关系
- 组织结构
- 经济结构

---

## 2. 记忆与社会关系

每个 Agent：

- 拥有长期记忆
- 可记录历史交互
- 可形成信任或不信任
- 可传播信息或谣言

关系网络是动态的：

- 合作会改变交易条件
- 冲突会改变声誉
- 制度会影响激励结构

---

## 3. 制度与规则演化

系统只提供最基础规则：

- 资源守恒
- 空间占用
- 行动成本
- 事件记录
- 共识机制

更复杂的制度由 Agent 自行创造。

例如：

- 市场机制
- 分配制度
- 税收协议
- 企业结构
- 联盟条约
- 自动化生产逻辑

这些规则以 WASM 模块形式存在。

---

## 4. 多玩家制度磨合

在多人环境中：

- 不同玩家指导的 Agent 可能提出不同制度
- 不同规则可能冲突
- 可能形成谈判、妥协或对抗
- 制度需要时间演化与稳定

系统不预设“正确制度”。

制度稳定性取决于：

- 资源效率
- 参与者数量
- 激励结构
- 共识成本

---

# 三、WASM 模块运行机制

## 1. 模块开发流程

Agent 可以：

1. 使用 Rust 编写逻辑
2. 编译为 WASM
3. 部署至世界
4. 安装至自身或基础设施

模块是游戏内实体：

- 有构建成本
- 有运行成本
- 可升级
- 可交易
- 可被销毁

---

## 2. 运行周期

WASM 模块：

- 在每个模拟周期运行
- 接收世界输入
- 输出行动或状态更新请求
- 由世界运行时进行验证与执行

模块不能绕过世界规则。

---

# 四、运行模式

## 1. 离线回放模式

支持生成世界数据并离线查看：

1. 生成 demo 数据
2. 启动 viewer server
3. 启动 UI 进行回放

用于：

- 调试
- 可视化
- 历史分析

---

## 2. 在线模式（脚本驱动）

- 世界持续运行
- 使用预设 bootstrap 初始化
- 支持实时观察

---

## 3. 在线模式（LLM 驱动）

- Agent 决策由 LLM 驱动
- 可通过配置文件指定模型参数
- 支持 tick 时间控制

LLM 参与决策，但：

- 不可绕过资源约束
- 不可直接修改世界状态
- 必须通过运行时执行路径

---

# 五、开放沙盒特性

理论上，通过 WASM 扩展与 Agent 自主组织，  
世界可演化出不同玩法风格，例如：

- 自动化生产体系
- 资源垄断结构
- 数据驱动市场
- 联盟与企业网络
- 技术竞争

这些玩法并非预设模式，而是规则驱动的自然结果。

---

# 六、系统边界

当前系统：

- 不追求低层物理写实(符合宏观基本规律即可)
- 不模拟真实轨道动力学(符合宏观基本规律即可)
- 不强制预设社会结构
- 不提供主线剧情

目标是：

在抽象层保持因果一致性与资源约束，  
让规则产生故事。
