- 日期：2026-02-15
- 完成内容：将 Web Viewer 的 wasm32 编译门禁加入 pre-commit，防止 `run-viewer-web.sh` 类问题在提交后才暴露。
  - 脚本改动：
    - 更新 `scripts/pre-commit.sh`，在既有 `required` 流程后新增：
      - `env -u RUSTC_WRAPPER cargo check -p agent_world_viewer --target wasm32-unknown-unknown`
  - 文档回写：
    - 更新 `doc/scripts/pre-commit.md`：将 viewer wasm32 编译检查纳入 pre-commit 范围与执行步骤。
    - 更新 `doc/scripts/pre-commit.project.md`：新增任务项“pre-commit 增加 viewer wasm32 编译检查”并标记完成。
- 完成内容：执行并通过回归验证。
  - `./scripts/pre-commit.sh`
  - 关键结果：
    - `cargo fmt --all -- --check` 通过；
    - `cargo test -p agent_world --tests --features test_tier_required` 通过（354 passed）；
    - 新增的 `cargo check -p agent_world_viewer --target wasm32-unknown-unknown` 通过。
- 遗留事项：
  - 当前为“每次 pre-commit 均执行 viewer wasm32 check”，后续如需优化耗时，可按变更路径做条件触发（例如仅在 `agent_world` runtime/viewer 相关文件改动时执行）。
