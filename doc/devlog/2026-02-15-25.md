- 日期：2026-02-15
- 完成内容：完成 FRB4.2~FRB4.5 代码实现与测试。
  - 配置扩展：`crates/agent_world/src/simulator/world_model.rs`
    - `AsteroidFragmentConfig` 新增：
      - `replenish_interval_ticks`（默认 `100`）
      - `replenish_percent_ppm`（默认 `10_000`，即 1%）
      - `material_distribution_strategy`（`uniform` / `core_metal_rim_volatile`）
    - `sanitized` 接入边界约束。
  - 运行期补种：
    - 新增 `crates/agent_world/src/simulator/kernel/fragment_replenish.rs`。
    - `WorldKernel::step` 接入周期补种钩子：当时间命中周期且 chunk frag 数低于上限时，按“上限的 1%（可配置）”补种。
    - 新增事件 `WorldEventKind::FragmentsReplenished`，并在 replay 侧接入回放应用，确保一致性。
  - 资源类型分布策略：
    - 修改 `crates/agent_world/src/simulator/asteroid_fragment.rs`：材质采样支持按分区策略动态权重。
    - `core_metal_rim_volatile`：中心偏 metal/composite，外缘偏 ice/carbon。
  - 测试更新：
    - `crates/agent_world/src/simulator/tests/asteroid_fragment.rs`
      - 新增分区材质偏置测试。
      - 扩展 sanitize 边界测试（补种周期与补种比例）。
    - `crates/agent_world/src/simulator/tests/kernel.rs`
      - 新增“每 100 tick 补 1%”运行期补种测试。
    - `crates/agent_world/src/simulator/tests/persist.rs`
      - 新增 `FragmentsReplenished` replay 一致性测试。
  - 项目文档进度：
    - `doc/world-simulator/frag-resource-balance-onboarding.project.md` 勾选 FRB4.2~FRB4.5。
- 完成内容：执行并通过定向回归（`test_tier_required`）。
  - `env -u RUSTC_WRAPPER cargo test -p agent_world simulator::tests::asteroid_fragment:: --features test_tier_required -- --nocapture`
  - `env -u RUSTC_WRAPPER cargo test -p agent_world step_replenishes_fragments_every_hundred_ticks_at_one_percent --features test_tier_required -- --nocapture`
  - `env -u RUSTC_WRAPPER cargo test -p agent_world replay_from_snapshot_applies_fragment_replenished_event --features test_tier_required -- --nocapture`
- 遗留事项：
  - FRB4.6：回写总项目文档并完成最终收口提交。
