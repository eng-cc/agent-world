# 任务日志
- 日期：2026-02-07
- 完成内容：新增 `world_llm_agent_demo` 可运行入口（`AgentRunner + LlmAgentBehavior`），默认场景 `llm_bootstrap`，支持 `--scenario/--ticks` 参数
- 完成内容：补充 `world_llm_agent_demo` 命令行解析单元测试（默认参数、别名场景、ticks 校验）
- 完成内容：更新 LLM 行为设计/项目管理文档与总项目管理文档状态，补充 README 运行说明
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world --bin world_llm_agent_demo`
- 完成内容：运行验证 `env -u RUSTC_WRAPPER cargo run -p agent_world --bin world_llm_agent_demo -- --help`
- 完成内容：提交到 git（LLM demo 可运行闭环）
- 遗留事项：无
- 日期：2026-02-07
- 完成内容：viewer UI 新增 Agent 活动面板（按 Agent 展示位置、电力、最近动作）
- 完成内容：3D 视图新增世界背景参照（空间边界盒 + 地板网格）
- 完成内容：拆分 `agent_world_viewer` 代码结构（`main.rs`/`scene_helpers.rs`/`tests.rs`）并将 `main.rs` 控制在 1200 行以内
- 完成内容：更新可视化设计文档与项目管理文档状态
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world_viewer`
- 遗留事项：当前 live viewer 仍为内置脚本驱动，尚未切换到 LLM 决策驱动
- 日期：2026-02-07
- 完成内容：`world_viewer_live` 新增 `--llm` 参数，支持在线 viewer server 切换到 LLM 决策驱动（默认保留 script）
- 完成内容：`ViewerLiveServerConfig` 新增决策模式配置（script/llm）并接入 `LiveWorld` 双驱动实现
- 完成内容：新增/更新测试（`world_viewer_live` 参数解析、live config 模式切换、viewer_live_integration 回归）
- 完成内容：更新 LLM 与可视化设计文档/项目管理文档、README 在线运行说明
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world --bin world_viewer_live`
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world live_server_config_supports_llm_mode`
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world --test viewer_live_integration --features viewer_live_integration`
- 完成内容：运行验证 `timeout 4s env -u RUSTC_WRAPPER cargo run -p agent_world --bin world_viewer_live -- llm_bootstrap --llm --bind 127.0.0.1:5019 --tick-ms 300`
- 完成内容：提交到 git（live viewer LLM 决策驱动）
- 遗留事项：LLM 模式的 live 集成测试尚未引入网络 Mock（当前仅验证启动链路）
- 日期：2026-02-07
- 完成内容：修复 viewer 多相机渲染歧义（3D/UI Camera 默认同 order）导致的 Camera order ambiguities 警告
- 完成内容：为 3D/2D 相机显式设置 `Camera.order`（3D=0, UI=1），避免 RenderTarget 优先级冲突
- 完成内容：更新可视化设计文档与项目管理文档状态
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world_viewer`
- 完成内容：提交到 git（viewer camera order 修复）
- 遗留事项：暂无
