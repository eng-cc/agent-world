# 2026-02-07

- 日期确认：2026-02-07
- 完成内容：基于现有设计与实现完成“背景故事物理规律一致性”审查，形成分级问题清单（P0/P1/P2）与测试清单（T1-T4）。
- 完成内容：将《背景故事物理一致性修订清单（2026-02-07）》附加到 `doc/world-simulator.md`，明确 C1-C9 与里程碑（PC1-PC3）。
- 完成内容：更新 `doc/world-simulator.project.md`，新增“9. 背景故事物理一致性修订”任务分解，并标注 C1 为后续优先项。
- 遗留事项：尚未落地 C1-C9 代码与测试，下一任务优先执行 C1（统一碎片尺寸口径并同步文档/默认配置/场景约束）。
- 完成内容：执行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world`（用于任务收口校验）。
- 遗留事项：测试未完成，原因是当前环境无法解析 `index.crates.io`（依赖下载失败：`blake3`）。
- 完成内容：落地 C1（尺寸口径统一）：`AsteroidFragmentConfig::default` 调整为 `radius_min_cm=25_000`、`radius_max_cm=500_000`，与“直径 500m-10km”设定一致。
- 完成内容：新增回归测试 `init_default_fragment_radius_matches_story_scale`，防止默认口径回退。
- 完成内容：更新设计文档与项目管理文档状态（C1 置为已完成，下一优先项切换为 C2）。
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world init_default_fragment_radius_matches_story_scale -- --nocapture`（通过）。
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world`（通过）。
- 遗留事项：继续执行 C2（辐射源标度修订）与对应单元测试。
- 完成内容：更新 `doc/scripts/pre-commit.md`，明确“新克隆仓库/新 `.git` 环境需重新注册 pre-commit hook”，补充注册与校验命令。
- 完成内容：更新 `doc/scripts/pre-commit.project.md` 任务状态，登记该文档维护项已完成。
- 完成内容：落地 C2（辐射源标度修订）：`AsteroidFragmentConfig` 新增 `radiation_emission_scale` 与 `radiation_radius_exponent`，默认分别为 `1e-9` 与 `3.0`。
- 完成内容：将辐射发射估算改为可配置标度公式 `emission = radius_cm^exponent * scale * material_factor`，替换原线性近似。
- 完成内容：新增回归测试 `asteroid_fragment_emission_scales_with_radius_exponent`，验证半径翻倍时发射显著上升。
- 完成内容：更新 `doc/world-simulator.md` 与 `doc/world-simulator.project.md` 状态，C2 标记为已完成并切换下一优先项到 C3。
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world asteroid_fragment_emission_scales_with_radius_exponent -- --nocapture`（通过）。
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world`（通过）。
- 遗留事项：继续执行 C3（采集场模型对齐：近邻源 + 背景场，含距离项）。
# 任务日志
- 日期：2026-02-07
- 完成内容：新增 `world_llm_agent_demo` 可运行入口（`AgentRunner + LlmAgentBehavior`），默认场景 `llm_bootstrap`，支持 `--scenario/--ticks` 参数
- 完成内容：补充 `world_llm_agent_demo` 命令行解析单元测试（默认参数、别名场景、ticks 校验）
- 完成内容：更新 LLM 行为设计/项目管理文档与总项目管理文档状态，补充 README 运行说明
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world --bin world_llm_agent_demo`
- 完成内容：运行验证 `env -u RUSTC_WRAPPER cargo run -p agent_world --bin world_llm_agent_demo -- --help`
- 完成内容：提交到 git（LLM demo 可运行闭环）
- 遗留事项：无
- 日期：2026-02-07
- 完成内容：viewer UI 新增 Agent 活动面板（按 Agent 展示位置、电力、最近动作）
- 完成内容：3D 视图新增世界背景参照（空间边界盒 + 地板网格）
- 完成内容：拆分 `agent_world_viewer` 代码结构（`main.rs`/`scene_helpers.rs`/`tests.rs`）并将 `main.rs` 控制在 1200 行以内
- 完成内容：更新可视化设计文档与项目管理文档状态
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world_viewer`
- 遗留事项：当前 live viewer 仍为内置脚本驱动，尚未切换到 LLM 决策驱动
- 日期：2026-02-07
- 完成内容：`world_viewer_live` 新增 `--llm` 参数，支持在线 viewer server 切换到 LLM 决策驱动（默认保留 script）
- 完成内容：`ViewerLiveServerConfig` 新增决策模式配置（script/llm）并接入 `LiveWorld` 双驱动实现
- 完成内容：新增/更新测试（`world_viewer_live` 参数解析、live config 模式切换、viewer_live_integration 回归）
- 完成内容：更新 LLM 与可视化设计文档/项目管理文档、README 在线运行说明
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world --bin world_viewer_live`
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world live_server_config_supports_llm_mode`
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world --test viewer_live_integration --features viewer_live_integration`
- 完成内容：运行验证 `timeout 4s env -u RUSTC_WRAPPER cargo run -p agent_world --bin world_viewer_live -- llm_bootstrap --llm --bind 127.0.0.1:5019 --tick-ms 300`
- 完成内容：提交到 git（live viewer LLM 决策驱动）
- 遗留事项：LLM 模式的 live 集成测试尚未引入网络 Mock（当前仅验证启动链路）
- 日期：2026-02-07
- 完成内容：修复 viewer 多相机渲染歧义（3D/UI Camera 默认同 order）导致的 Camera order ambiguities 警告
- 完成内容：为 3D/2D 相机显式设置 `Camera.order`（3D=0, UI=1），避免 RenderTarget 优先级冲突
- 完成内容：更新可视化设计文档与项目管理文档状态
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world_viewer`
- 完成内容：提交到 git（viewer camera order 修复）
- 遗留事项：暂无
- 日期：2026-02-07
- 完成内容：修复 `agent_world_viewer` 3D 轨道相机交互失效问题，将输入从 `MouseMotion` 改为基于光标位置差值（cursor delta）
- 完成内容：新增 3D 交互映射（左键旋转、右键/中键平移、`Shift+左键` 平移、滚轮缩放），并限定仅在 3D 视口生效
- 完成内容：拆分相机控制到 `crates/agent_world_viewer/src/camera_controls.rs`，将 `main.rs` 控制在 1200 行以内
- 完成内容：新增相机控制单元测试（drag delta / orbit input）
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world_viewer`
- 遗留事项：请在本地窗口环境手动验证鼠标与触控板交互体验
- 日期：2026-02-07
- 完成内容：在 `AGENTS.md` 增加“Agent 专用 UI 截图闭环调试”说明（Xvfb + ffmpeg + viewer/server）
- 完成内容：沉淀标准调试步骤（启动、抓图、读取、清理）与故障排查要点（黑屏/窗口坐标/首帧时机）
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world_viewer`
- 遗留事项：后续可按需封装为脚本 `scripts/capture-viewer-frame.sh`
- 日期：2026-02-07
- 完成内容：新增 `scripts/capture-viewer-frame.sh`，封装 viewer 截图闭环调试（live server + Xvfb + viewer + root/window 截图）
- 完成内容：脚本默认每次调试前清空 `.tmp/`，并支持 `--keep-tmp` 保留临时产物
- 完成内容：新增 `doc/scripts/capture-viewer-frame.md` 与 `doc/scripts/capture-viewer-frame.project.md`，沉淀流程、参数与里程碑
- 完成内容：更新 `AGENTS.md`（优先脚本）与 `README.md`（脚本入口说明）
- 完成内容：更新 `.gitignore`，明确 `.tmp/` 不纳入 git 追踪
- 完成内容：运行验证 `./scripts/capture-viewer-frame.sh --help`
- 完成内容：运行验证 `./scripts/capture-viewer-frame.sh --scenario llm_bootstrap --addr 127.0.0.1:5031 --tick-ms 300 --viewer-wait 3`
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world_viewer`
- 遗留事项：后续可按需增加“多帧抓图”模式与自动输入注入能力
- 日期：2026-02-07
- 完成内容：按约定移除 `README.md` 中“Agent 调试截图（给 Codex）”重复说明，仅保留 `AGENTS.md` 作为 agent 调试流程入口
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world_viewer`
- 遗留事项：无
- 日期：2026-02-07
- 完成内容：新增 viewer 选中对象详情面板（Agent/Location），点击 3D 对象可显示详细信息（位置/资源/电力热状态/最近事件）
- 完成内容：为 LLM 模式打通决策 trace 链路：`LlmAgentBehavior` 采集输入输出，live server 下发 `ViewerResponse::DecisionTrace`
- 完成内容：详情面板接入最近 LLM 输入输出（`llm_input`/`llm_output`）及错误信息（`llm_error`/`parse_error`）
- 完成内容：新增/更新测试（LLM trace、协议 round-trip、viewer 详情文案、decision trace 消息收集）
- 完成内容：更新可视化设计文档/项目管理文档与总项目管理文档状态
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world_viewer`
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world`
- 遗留事项：若后续详情文本继续增长，可补“折叠/分页”与“多帧 trace 检索”
- 日期：2026-02-07
- 完成内容：在可视化相关设计文档中补充“希望通过可视化能以最直接的方式获取所有模拟相关的信息”原则（M5/M6/详情面板）
- 完成内容：在 `doc/world-simulator/visualization.md` 新增“现状缺口（信息直达视角）”清单，覆盖对象覆盖、时序定位、事件联动、LLM 诊断维度、世界覆盖层与信息导出
- 完成内容：更新可视化项目管理文档与总项目管理文档状态
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world_viewer`
- 遗留事项：按缺口清单推进 Asset/设施类对象详情与时间轴回看能力
- 日期：2026-02-07
- 完成内容：viewer 选中详情对象覆盖扩展到 Asset/PowerPlant/PowerStorage（含 3D marker、点击选中、详情文案）
- 完成内容：Asset 详情新增归属者信息与归属者相关事件；PowerPlant/PowerStorage 详情新增设施参数与电力事件
- 完成内容：更新可视化与详情面板设计文档/项目管理文档，修正信息直达缺口清单状态（仅剩 Chunk 详情）
- 完成内容：新增/更新 headless UI 测试（Asset 详情、PowerPlant 详情）
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world_viewer`
- 遗留事项：补齐 Chunk 详情与时间轴回看能力

- 日期：2026-02-07
- 完成内容：viewer 选中详情补齐 Chunk 对象（3D marker、点击选中、详情文案）
- 完成内容：Chunk 详情新增坐标/状态/边界/预算摘要与 ChunkGenerated 事件显示
- 完成内容：更新可视化/详情面板设计文档与项目管理文档（对象覆盖缺口清零）
- 完成内容：新增 headless UI 测试（Chunk 详情）
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world_viewer`
- 遗留事项：推进时间轴回看与对象-事件联动
- 日期：2026-02-07
- 完成内容：在线模式 `ViewerControl::Seek` 支持任意 tick（历史 tick 走 reset+replay，未来 tick 走前向推进）
- 完成内容：`LiveWorld` 新增 `seek_to_tick`，并增加不可达保护（连续停滞阈值后返回 error，避免无限循环）
- 完成内容：seek 完成后统一返回目标时刻 `Snapshot + Metrics`，并在不可达时追加错误消息
- 完成内容：补充 live seek 单元测试（前进 seek、回退 seek、无动作场景停滞保护）
- 完成内容：更新可视化设计文档/项目管理文档与总项目管理文档状态（时间轴语义与缺口清单）
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world live_world_seek -- --nocapture`
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world --test viewer_live_integration --features viewer_live_integration`
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world --bin world_viewer_live`
- 遗留事项：viewer UI 仍仅有 `Seek 0` 按钮，后续需补目标 tick 输入/时间轴拖拽
- 日期：2026-02-07
- 完成内容：viewer 顶部控制区新增时间轴 UI（`Timeline` 状态文本 + `-100/-10/-1/+1/+10/+100` 微调 + `Seek Target`）
- 完成内容：新增时间轴拖拽条（scrub bar），按住拖拽可连续设置目标 tick 并发送 seek
- 完成内容：新增 `crates/agent_world_viewer/src/timeline_controls.rs`，独立管理时间轴状态同步/输入处理/UI 渲染
- 完成内容：为保持单文件行数约束，将控制按钮处理下沉至 `timeline_controls`，`main.rs` 保持在 1200 行以内
- 完成内容：补充 headless UI 测试（时间轴按钮 seek、拖拽映射、状态文案/进度条渲染）
- 完成内容：更新可视化设计文档/项目管理文档与总项目管理文档状态（时间轴 UI 已落地）
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world_viewer`
- 遗留事项：时间轴暂未展示关键事件密度与标签（错误/LLM 决策/资源峰值）
- 日期：2026-02-07
- 完成内容：viewer 时间轴新增关键事件标注摘要（`err/llm/peak` 计数 + 对应 tick 列表）
- 完成内容：viewer 时间轴新增事件密度 sparkline（按 tick 分桶）用于识别事件高密度区间
- 完成内容：新增资源峰值提取规则（`ResourceTransferred/RadiationHarvested/CompoundRefined/Power*` 权重）
- 完成内容：补充 `timeline_controls` 模块单元测试（关键事件提取、密度分布、tick 列表压缩）
- 完成内容：更新可视化设计文档/项目管理文档与总项目管理文档状态（时间轴关键标注已落地）
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world_viewer`
- 遗留事项：时间轴标注尚未支持点击后联动跳转到事件列表上下文
- 日期：2026-02-07
- 完成内容：时间轴新增 `Jump Err/LLM/Peak` 标注联动按钮，点击后定位到下一关键 tick
- 完成内容：事件列表支持按目标 tick 显示上下文窗口，并高亮最近事件（`>>`）
- 完成内容：`update_ui` 接入 timeline 手动目标联动，使时间轴与事件上下文保持一致
- 完成内容：补充 `timeline_controls` 跳转逻辑单测与 `ui_text` 事件上下文摘要单测
- 完成内容：更新可视化设计文档/项目管理文档与总项目管理文档状态（标注联动任务完成）
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world_viewer`
- 遗留事项：后续可补“标注类别开关/筛选”与“点击事件反向定位对象”
- 日期：2026-02-07
- 完成内容：viewer 时间轴新增事件类别独立开关（Err/LLM/Peak），支持分别开/关关键标注
- 完成内容：时间轴关键标注跳转与摘要统计按类别开关过滤（禁用类别后不再计数/跳转）
- 完成内容：新增 `timeline_controls` 单元测试（类别开关切换、禁用类别下跳转保护）
- 完成内容：更新可视化设计文档/项目管理文档与总项目管理文档状态
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world_viewer`
- 遗留事项：继续推进“事件与对象双向联动（事件定位对象、对象跳转事件上下文）”
- 日期：2026-02-07
- 完成内容：viewer 新增事件与对象双向联动入口（`Locate Focus Event Object` / `Jump Selection Events`）
- 完成内容：实现 `focus event -> 3D selection` 定位链路（含 Agent/Location/设施/Chunk/owner 映射与降级提示）
- 完成内容：实现 `selection -> timeline` 跳转链路（按对象筛选相关事件并跳转下一 tick）
- 完成内容：重构 3D 选中逻辑到 `selection_linking.rs`，并保留高亮行为
- 完成内容：更新可视化设计文档/项目管理文档与总项目管理文档状态
- 完成内容：新增联动单元测试（映射、跳转、按钮行为）并通过 `env -u RUSTC_WRAPPER cargo test -p agent_world_viewer`
- 遗留事项：补充 LLM 诊断字段（模型、耗时、token、重试）
- 完成内容：落地 C3（采集场模型对齐）：`HarvestRadiation` 改为“近邻源贡献 + 远场背景 + radiation_floor”叠加，并引入距离项与介质吸收项。
- 完成内容：新增测试 `harvest_radiation_includes_nearby_sources_and_distance_decay` 与 `harvest_radiation_uses_background_floor_when_no_source`。
- 完成内容：调整既有测试 `harvest_radiation_adds_electricity` 的可用辐射断言，匹配 background floor 纳入后的口径。
- 完成内容：更新 `doc/world-simulator.md` 与 `doc/world-simulator.project.md` 状态，C3 标记完成并切换下一优先项到 C4。
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world harvest_radiation_includes_nearby_sources_and_distance_decay -- --nocapture`（通过）。
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world harvest_radiation_uses_background_floor_when_no_source -- --nocapture`（通过）。
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world`（通过）。
- 遗留事项：继续执行 C4（背景辐射守恒说明：`radiation_floor` 来源与边界）。
- 日期：2026-02-07
- 完成内容：落地 C4（背景辐射守恒说明）：`PhysicsConfig` 新增 `radiation_floor_cap_per_tick`（默认 5），将 `radiation_floor` 明确为外部背景通量并对 floor 贡献执行 `min(radiation_floor, radiation_floor_cap_per_tick)` 限幅。
- 完成内容：新增测试 `harvest_radiation_caps_background_floor_when_no_source`，覆盖“零源场景 floor 限幅”路径。
- 完成内容：更新 `doc/world-simulator.md` 与 `doc/world-simulator.project.md` 状态，C4 标记完成并切换下一优先项到 C5。
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world harvest_radiation_caps_background_floor_when_no_source -- --nocapture`（通过）。
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world`（通过）。
- 遗留事项：继续执行 C5（运动学约束补齐：最大位移/速度上限）。
- 日期：2026-02-07
- 完成内容：落地 C5（运动学约束补齐）：`PhysicsConfig` 新增 `max_move_distance_cm_per_tick` 与 `max_move_speed_cm_per_s`（默认 10km/tick 与 1km/s，保守口径）。
- 完成内容：`MoveAgent` 增加双重约束校验（位移上限 + 速度上限），超限分别返回 `MoveDistanceExceeded` 与 `MoveSpeedExceeded`。
- 完成内容：新增测试 `kernel_rejects_move_beyond_max_distance_per_tick` 与 `kernel_rejects_move_beyond_max_speed`，覆盖 C5 两条拒绝路径。
- 完成内容：为长距离回放/viewer demo 用例显式配置更高移动上限，避免与新默认保守阈值冲突。
- 完成内容：更新 `doc/world-simulator.md` 与 `doc/world-simulator.project.md` 状态，C5 标记完成并切换下一优先项到 C6。
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world kernel_rejects_move_beyond_max_distance_per_tick -- --nocapture`（通过）。
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world kernel_rejects_move_beyond_max_speed -- --nocapture`（通过）。
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world action_chunk_generation_consumes_boundary_reservations -- --nocapture`（通过）。
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world replay_from_snapshot_rebuilds_and_validates_chunk_generated_events -- --nocapture`（通过）。
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world replay_with_budget_caps_keeps_chunk_generated_consistent -- --nocapture`（通过）。
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world`（通过）。
- 遗留事项：继续执行 C6（能耗参数重标定：`time_step_s`/`power_unit_j`/移动能耗联动）。
- 日期：2026-02-07
- 完成内容：落地 C6（能耗参数重标定）：将 `move_cost_per_km_electricity` 定义为参考口径（10s tick + 1kJ 电力单位）下的基准系数，并在 `WorldConfig::movement_cost` 中按 `time_step_s` 与 `power_unit_j` 自动缩放。
- 完成内容：`MoveAgent` 统一改为使用 `WorldConfig::movement_cost`，确保行动路径与 viewer 估算使用同一能耗口径。
- 完成内容：新增测试 `movement_cost_scales_with_time_step_and_power_unit` 与 `movement_cost_uses_calibrated_per_km_in_move_action`，覆盖参数联动与动作路径两条回归。
- 完成内容：更新 `doc/world-simulator.md` 与 `doc/world-simulator.project.md` 状态，C6 标记完成并切换下一优先项到 C7。
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world movement_cost_scales_with_time_step_and_power_unit -- --nocapture`（通过）。
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world movement_cost_uses_calibrated_per_km_in_move_action -- --nocapture`（通过）。
- 完成内容：运行检查 `env -u RUSTC_WRAPPER cargo fmt --all -- --check`（通过）。
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world`（通过）。
- 遗留事项：继续执行 C7（热模型升级：与温差相关的散热模型）。
- 日期：2026-02-07
- 完成内容：落地 C7（热模型升级）：`PhysicsConfig` 新增 `thermal_dissipation_gradient_bps`，将散热从固定常数改为“热量占比 × 梯度系数”的温差相关模型。
- 完成内容：`process_power_tick` 改为按当前热量动态计算散热量，高热状态散热更快、低热状态散热更慢；散热使用饱和减法，避免出现负热量。
- 完成内容：新增测试 `power_tick_dissipates_more_heat_when_hotter` 与 `power_tick_thermal_dissipation_never_makes_heat_negative`。
- 完成内容：更新 `doc/world-simulator.md` 与 `doc/world-simulator.project.md` 状态，C7 标记完成并切换下一优先项到 C8。
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world power_tick_dissipates_more_heat_when_hotter -- --nocapture`（通过）。
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world power_tick_thermal_dissipation_never_makes_heat_negative -- --nocapture`（通过）。
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world harvest_radiation_applies_thermal_penalty -- --nocapture`（通过）。
- 完成内容：运行检查 `env -u RUSTC_WRAPPER cargo fmt --all -- --check`（通过）。
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world`（通过）。
- 遗留事项：继续执行 C8（成分与放射性分布校准）。
- 日期：2026-02-07
- 完成内容：落地 C8（成分与放射性分布校准）：`AsteroidFragmentConfig` 默认材质占比调整为 `52/8/18/18/4`（silicate/metal/ice/carbon/composite），将高放射候选（metal+composite）默认占比收敛到 12%。
- 完成内容：新增 `material_radiation_factors`（bps）配置并接入碎片发射计算链路；默认 `radiation_emission_scale` 下调到 `1e-12`，默认场景回归“多数可采但非普遍高危”。
- 完成内容：新增测试 `asteroid_fragment_default_mix_is_conservative_for_high_radiation_materials`、`asteroid_fragment_default_calibration_keeps_small_silicate_non_extreme`、`asteroid_fragment_default_calibration_preserves_high_radiation_outliers`、`init_default_fragment_radiation_distribution_is_conservative`。
- 完成内容：更新 `doc/world-simulator.md` 与 `doc/world-simulator.project.md`，将 C8 标记完成并切换下一优先项到 C9。
- 完成内容：运行检查 `env -u RUSTC_WRAPPER cargo fmt --all -- --check`（通过）。
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world asteroid_fragment_default_mix_is_conservative_for_high_radiation_materials -- --nocapture`（通过）。
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world asteroid_fragment_default_calibration_keeps_small_silicate_non_extreme -- --nocapture`（通过）。
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world asteroid_fragment_default_calibration_preserves_high_radiation_outliers -- --nocapture`（通过）。
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world init_default_fragment_radiation_distribution_is_conservative -- --nocapture`（通过）。
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world`（通过）。
- 遗留事项：继续执行 C9（物理参数表固化：单位/范围/调参影响）。
- 日期：2026-02-07
- 完成内容：落地 C9（物理参数表固化）：在 `world_model` 新增 `PhysicsParameterSpec` 与 `physics_parameter_specs()`，固定 `PhysicsConfig` 全量参数的单位、推荐范围与调参影响。
- 完成内容：新增测试 `physics_parameter_specs_cover_serialized_physics_config_fields` 与 `physics_parameter_specs_define_units_ranges_and_default_coverage`，约束“字段覆盖、单位非空、范围有效、默认值在推荐区间内”。
- 完成内容：更新 `doc/world-simulator.md` 参数固化表（C9）与 C9 状态，补齐 `heat_factor` 的范围口径。
- 完成内容：更新 `doc/world-simulator.project.md` 状态，C9 标记完成并切换下一优先项到 T1。
- 完成内容：运行检查 `env -u RUSTC_WRAPPER cargo fmt --all -- --check`（通过）。
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world physics_parameter_specs_cover_serialized_physics_config_fields -- --nocapture`（通过）。
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world physics_parameter_specs_define_units_ranges_and_default_coverage -- --nocapture`（通过）。
- 完成内容：运行测试 `env -u RUSTC_WRAPPER cargo test -p agent_world`（通过）。
- 遗留事项：继续执行 T1（单调性测试：距离衰减/过热降效/移动能耗）。
