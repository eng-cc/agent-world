# 2026-02-26

- 时刻：2026-02-26 11:03:15 CST
- 完成内容：完成“Playwright 使用手册启动防抖与失败分级补充”文档任务。
  - 更新 `doc/testing/web-ui-playwright-closure-manual.md`：新增启动前自检（端口监听、主页可达、URL 引号约束）、会话防抖与启动失败分级处置（`ERR_CONNECTION_REFUSED` / 渲染 panic / `connecting+tick=0` / URL `source` 解析错误）。
  - 更新 `doc/testing/systematic-application-testing-manual.project.md`：新增并完成 T12，回写最近更新日期为 2026-02-26。
- 测试：
  - `wc -l doc/testing/web-ui-playwright-closure-manual.md doc/testing/systematic-application-testing-manual.project.md`
  - `rg -n "启动前自检|Fail Fast|ERR_CONNECTION_REFUSED|copy_deferred_lighting_id_pipeline|URL='http://" doc/testing/web-ui-playwright-closure-manual.md`
  - `rg -n "T12|最近更新：2026-02-26" doc/testing/systematic-application-testing-manual.project.md`
- 遗留事项：
  - 无。

- 时刻：2026-02-26 11:17:37 CST
- 完成内容：完成“Playwright 手册路径口径与工程实际对齐”文档任务。
  - 更新 `doc/testing/web-ui-playwright-closure-manual.md`：Playwright 示例改为仓库内 `.codex` 路径（`$REPO_ROOT/.codex/skills/playwright/scripts/playwright_cli.sh`），移除 `CODEX_HOME` 依赖。
  - 更新 `doc/viewer-manual.md`：同步改为仓库内 `.codex` 路径，并新增 wrapper 存在性检查。
  - 更新项目管理文档 `doc/testing/systematic-application-testing-manual.project.md`：新增并完成 T13。
- 测试：
  - `rg -n "CODEX_HOME|REPO_ROOT|\.codex/skills/playwright/scripts/playwright_cli\.sh" doc/testing/web-ui-playwright-closure-manual.md doc/viewer-manual.md`
  - `rg -n "T13" doc/testing/systematic-application-testing-manual.project.md`
  - `wc -l doc/testing/web-ui-playwright-closure-manual.md doc/viewer-manual.md doc/testing/systematic-application-testing-manual.project.md`
- 遗留事项：
  - 无。

- 时刻：2026-02-26 11:28:18 CST
- 完成内容：完成“Web 验收 GPU + headed 硬门禁命令补充”文档任务。
  - 更新 `doc/testing/web-ui-playwright-closure-manual.md`：新增 `2.2) GPU + headed 硬门禁（验收必须）`，包含 `open "$URL" --headed` 与 `SwiftShader/software rendering` 关键字 fail-fast 判定命令。
  - 更新 `doc/testing/systematic-application-testing-manual.project.md`：新增并完成 T14。
- 测试：
  - `rg -n "GPU \+ headed|open \"\$URL\" --headed|SwiftShader|software rendering|Failed to create WebGPU Context Provider" doc/testing/web-ui-playwright-closure-manual.md`
  - `rg -n "T14" doc/testing/systematic-application-testing-manual.project.md`
  - `wc -l doc/testing/web-ui-playwright-closure-manual.md doc/testing/systematic-application-testing-manual.project.md doc/devlog/2026-02-26.md`
- 遗留事项：
  - 无。

- 时刻：2026-02-26 11:54:13 CST
- 完成内容：按 `doc/game-test.md` 执行一轮“真实玩家”Playwright Web 闭环试玩并填写卡片。
  - 启动链路：`world_viewer_live` + `run-viewer-web.sh --address 127.0.0.1 --port 4173`。
  - 使用 Playwright headed + `video-start/video-stop` 完成实操，产物落盘到 `output/playwright/playability/20260226-114106/`（含 `playthrough.webm`、截图、控制台日志）。
  - 新增并填写卡片：`doc/playability_test_result/card_2026_02_26_11_41_06.md`。
  - 回写项目管理文档：`doc/game-test.project.md` 新增并完成 T8，补充本轮测试记录与风险。
- 测试：
  - `PLAYWRIGHT_CLI_SESSION=playability-20260226-114106 ./.codex/skills/playwright/scripts/playwright_cli.sh open "http://127.0.0.1:4173/?ws=ws://127.0.0.1:5010&test_api=1" --headed`
  - `PLAYWRIGHT_CLI_SESSION=playability-20260226-114106 ./.codex/skills/playwright/scripts/playwright_cli.sh video-start`
  - `PLAYWRIGHT_CLI_SESSION=playability-20260226-114106 ./.codex/skills/playwright/scripts/playwright_cli.sh eval "() => JSON.stringify(window.__AW_TEST__?.getState?.() ?? null)"`
  - `PLAYWRIGHT_CLI_SESSION=playability-20260226-114106 ./.codex/skills/playwright/scripts/playwright_cli.sh eval "() => { try { return JSON.stringify(window.__AW_TEST__?.runSteps?.(10) ?? null); } catch (e) { return String(e); } }"`
  - `PLAYWRIGHT_CLI_SESSION=playability-20260226-114106 ./.codex/skills/playwright/scripts/playwright_cli.sh video-stop`
  - `wc -l doc/playability_test_result/card_2026_02_26_11_41_06.md doc/game-test.project.md doc/devlog/2026-02-26.md`
- 遗留事项：
  - 本轮仍复现 `connectionStatus=connecting` + `tick=0`，并伴随 `WebSocket opening handshake timed out` 与 wasm panic（`assertion failed: old_size > 0`），可玩性闭环未恢复。
