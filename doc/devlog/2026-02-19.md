- 日期：2026-02-19
- 时刻：2026-02-19 00:01:55 CST
- 完成内容：完成“将系统性应用测试手册迁移到项目根目录并提交”任务。
  - 将 `doc/testing/systematic-application-testing-manual.md` 迁移为 `systematic-application-testing-manual.md`。
  - 更新项目管理文档 `doc/testing/systematic-application-testing-manual.project.md` 中的设计文档路径、任务拆解（新增 T8）与状态时间。
  - 保持手册正文内容与 TODO 项不变，仅调整存放位置与引用口径。
- 测试：
  - `./scripts/ci-tests.sh required`
- 遗留事项：
  - 无（后续按手册 TODO-1/TODO-2 单独任务推进）。

- 日期：2026-02-19
- 时刻：2026-02-19 00:09:53 CST
- 完成内容：完成“AGENTS.md 测试章节迁移 + 文档引用收敛”任务。
  - 将 `AGENTS.md` 中“Agent 专用：UI Web 闭环调试”由长流程改为短入口与约束，避免双维护。
  - 将原章节中的 fallback 规则与推荐约定补充进 `testing-manual.md`（S6 补充约定）。
  - 更新项目管理文档 `doc/testing/systematic-application-testing-manual.project.md`，新增 T10 并回写状态说明。
- 测试：
  - `./scripts/ci-tests.sh required`
- 遗留事项：
  - 无（执行入口已统一，后续仅在 `testing-manual.md` 维护详细流程）。
- 时刻：2026-02-19 00:18:40 CST
- 完成内容：完成 README 生产级缺口收口（二次）T0 文档建档。
  - 新增设计文档：`doc/readme-prod-gap1245-wasm-repl-topology-player.md`。
  - 新增项目管理文档：`doc/readme-prod-gap1245-wasm-repl-topology-player.project.md`。
  - 项目管理文档状态初始化：T0 完成，T1~T5 待执行。
- 测试：
  - `env -u RUSTC_WRAPPER cargo check`
- 遗留事项：
  - 执行 T1：默认构建启用 `wasmtime` 并补齐测试。

- 日期：2026-02-19
- 时刻：2026-02-19 00:21:33 CST
- 完成内容：完成 README 缺口收口 T1（默认构建启用 `wasmtime`）。
  - `crates/agent_world/Cargo.toml`：`default` feature 从空集调整为 `["wasmtime"]`，默认构建具备真实 WASM 执行能力。
  - `doc/readme-prod-gap1245-wasm-repl-topology-player.project.md`：回写 T1 状态为完成。
- 测试：
  - `env -u RUSTC_WRAPPER cargo check -p agent_world --features test_tier_required`
  - `env -u RUSTC_WRAPPER cargo test -p agent_world_wasm_executor --features wasmtime`
- 遗留事项：
  - 执行 T2：实现 node libp2p replication request/handler 通道。

- 日期：2026-02-19
- 时刻：2026-02-19 00:41:02 CST
- 完成内容：完成 T2（node libp2p replication request/handler 通道）。
  - `crates/agent_world_node/src/libp2p_replication_network.rs`：
    - 接入 `request_response` 行为，与既有 `gossipsub` 并行运行。
    - `request` 实现为：有可达 peer 走远端 RR，无 peer 回退本地 handler。
    - `register_handler` 实现为线程内 handler 表注册，并用于本地 fallback 与远端请求处理。
    - 增加连接/监听状态与错误跟踪，支撑 RR 集成测试稳定等待。
    - 新增测试：本地 fallback、双节点 RR 互通。
  - `crates/agent_world_node/Cargo.toml`：补齐 `libp2p` features（`request-response`、`cbor`）。
  - `doc/readme-prod-gap1245-wasm-repl-topology-player.project.md`：回写 T2 完成，下一步切换到 T3。
- 测试：
  - `env -u RUSTC_WRAPPER cargo test -p agent_world_node`
- 遗留事项：
  - 执行 T3：实现跨主机 `triad_distributed` 拓扑并补齐 CLI/启动测试。

- 日期：2026-02-19
- 时刻：2026-02-19 00:47:13 CST
- 完成内容：完成 T3（跨主机 `triad_distributed` 拓扑）。
  - `crates/agent_world/src/bin/world_viewer_live/cli.rs`：
    - `--topology` 新增 `triad_distributed`。
    - 新增显式 triad 地址参数：`--triad-sequencer-gossip`、`--triad-storage-gossip`、`--triad-observer-gossip`。
    - 新增 `triad_distributed` 参数校验（节点启用、共识门控、三地址必填且互异、与 `--node-gossip-*` 互斥）。
  - `crates/agent_world/src/bin/world_viewer_live.rs`：
    - 新增 `start_triad_distributed_live_node`，单进程单角色启动（`--node-role` 决定角色）。
    - 三角色节点 ID 固定派生：`<node-id>-sequencer|storage|observer`，validator 集固定 `34/33/33`。
    - 新增可复用的 `attach_optional_replication_network`，`single` 与 `triad_distributed` 共享 libp2p replication 挂接路径。
  - `crates/agent_world/src/bin/world_viewer_live/world_viewer_live_tests.rs`：
    - 新增 `triad_distributed` 的 parse/startup/replication 注入测试。
  - `doc/readme-prod-gap1245-wasm-repl-topology-player.project.md`：回写 T3 完成，下一步切换到 T4。
- 测试：
  - `env -u RUSTC_WRAPPER cargo test -p agent_world --bin world_viewer_live`
- 遗留事项：
  - 执行 T4：实现玩家节点身份模型下沉并补齐配置/动作/消息测试。

- 日期：2026-02-19
- 时刻：2026-02-19 00:26:54 CST
- 完成内容：完成 T1 收口修正（required-tier 稳定性）。
  - `crates/agent_world/src/runtime/tests/economy_bootstrap.rs`：将文件级条件从 `feature = "wasmtime"` 调整为 `all(feature = "wasmtime", feature = "test_tier_full")`，避免 default 开启 wasmtime 后重型 m4 用例进入 required-tier。
  - 保持 T1 目标不变：`agent_world` 默认构建启用 `wasmtime`。
- 测试：
  - `CI_VERBOSE=1 ./scripts/ci-tests.sh required`
- 遗留事项：
  - 执行 T2：实现 node libp2p replication request/handler 通道。

- 日期：2026-02-19
- 时刻：2026-02-19 01:02:03 CST
- 完成内容：完成 T4（玩家节点身份模型下沉，节点/动作/消息一致身份语义）。
  - `crates/agent_world_node/src/types.rs`：`NodeConfig` 增加 `player_id`（默认等于 `node_id`），`NodePosConfig` 增加 `validator_player_ids`，`NodeSnapshot` 增加 `player_id`。
  - `crates/agent_world_node/src/pos_validation.rs`：增强 POS 校验，要求 validator-player 一一绑定、禁止空绑定、禁止同玩家绑定多个 validator、禁止未知 validator 绑定。
  - `crates/agent_world_node/src/consensus_action.rs`：`NodeConsensusAction` 增加 `submitter_player_id`，action root 升级到 v2（含 player），并保留 v1 兼容校验。
  - `crates/agent_world_node/src/lib.rs`、`crates/agent_world_node/src/gossip_udp.rs`、`crates/agent_world_node/src/consensus_signature.rs`：proposal/attestation/commit 消息新增 `player_id`，签名负载纳入 `player_id`，引擎 ingest 增加 player-binding 一致性过滤。
  - `crates/agent_world_node/src/node_runtime_core.rs`：新增 `submit_consensus_action_payload_as_player`，强校验提交方 `player_id` 与节点配置一致。
  - `crates/agent_world/src/viewer/live/consensus_bridge.rs`：玩家提交路径改为调用 runtime 的按玩家提交接口；system/agent 维持原接口。
  - `crates/agent_world_node/src/tests.rs`、`crates/agent_world_node/src/tests_action_payload.rs`、`crates/agent_world/src/bin/world_viewer_live/execution_bridge.rs`、`crates/agent_world/src/runtime/node_points_runtime.rs`：补齐 player_id 相关测试与快照构造更新。
  - `doc/readme-prod-gap1245-wasm-repl-topology-player.project.md`：回写 T4 完成，下一步切换到 T5。
- 测试：
  - `env -u RUSTC_WRAPPER cargo test -p agent_world_node`
  - `env -u RUSTC_WRAPPER cargo test -p agent_world --bin world_viewer_live`
  - `env -u RUSTC_WRAPPER cargo test -p agent_world viewer::live::tests::live_world_consensus_bridge_applies_only_committed_actions`
- 遗留事项：
  - 执行 T5：`env -u RUSTC_WRAPPER cargo check` 与 `CI_VERBOSE=1 ./scripts/ci-tests.sh required` 回归收口。
