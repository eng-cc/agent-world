- 日期：2026-02-10
- 完成内容：新增《GitHub Pages 对外展示站点设计》（`doc/github-pages-showcase.md`），明确目标、范围、方案对比、接口/数据、里程碑、风险与首版验收标准。
- 完成内容：新增项目管理文档（`doc/github-pages-showcase.project.md`），完成首版任务拆解、依赖和状态定义。
- 完成内容：完成仓库现状调研（`README.md`、`.github/workflows/rust.yml`、现有文档模板），确认当前尚无 GitHub Pages 相关实现。
- 完成内容：完成 GitHub Pages 首版落地：新增 `site/index.html`、`site/assets/styles.css`、`site/assets/app.js`、`site/assets/images/world-loop.svg`，形成可独立部署的静态对外展示页。
- 完成内容：新增 Pages 自动部署工作流 `.github/workflows/pages.yml`，采用 `actions/configure-pages/upload-pages-artifact/deploy-pages` 标准链路，触发路径限定为 `site/**` 等相关文件。
- 完成内容：更新 `README.md` 文档入口，新增对外展示站点地址 `https://eng-cc.github.io/agent-world/`。
- 完成内容：执行 `env -u RUSTC_WRAPPER cargo check`（通过）。
- 完成内容：完成双语增强：新增英文页 `site/en/index.html`，中文页 `site/index.html` 与英文页互相提供语言切换入口（CN/EN）。
- 完成内容：新增站点 favicon `site/assets/images/favicon.svg`，消除本地预览 `favicon.ico` 404 控制台报错。
- 完成内容：按 Playwright 闭环完成本地双页校验并截图（中文页、英文页）：`output/playwright/pages-bilingual/.playwright-cli/page-2026-02-10T04-04-40-518Z.png`、`output/playwright/pages-bilingual/.playwright-cli/page-2026-02-10T04-04-58-834Z.png`。
- 完成内容：执行 `env -u RUSTC_WRAPPER cargo check`（通过，双语增强后再次校验）。
- 完成内容：新增首访语言自动跳转逻辑（英文浏览器首访根路径自动跳转 `/en/`），实现于 `site/assets/app.js`。
- 完成内容：新增手动语言选择记忆（点击 CN/EN 后写入本地存储并停止后续自动跳转），保证用户偏好优先。
- 完成内容：按 Playwright 闭环验证自动跳转策略：
  - `locale=en-US` 首访 `http://127.0.0.1:4176/` 自动到 `/en/`；
  - 同会话手动切回中文后再次访问根路径保持中文，不再自动跳转；
  - `locale=zh-CN` 首访保持中文页。
- 完成内容：自动跳转验证截图：`output/playwright/pages-lang-redirect/.playwright-cli/page-2026-02-10T04-15-30-720Z.png`、`output/playwright/pages-lang-redirect/.playwright-cli/page-2026-02-10T04-15-32-306Z.png`。
- 完成内容：按反馈将语言标识弱化并固定到右上角（`中/EN`），降低视觉权重且保留可用性；同步优化移动端位置与菜单相对关系。
- 完成内容：右上角样式验证截图：`output/playwright/pages-lang-topright/.playwright-cli/page-2026-02-10T04-25-01-673Z.png`。
- 完成内容：按反馈将语言入口改为“最右侧地球图标按钮”，点击展开语言下拉菜单（中文/English），并保持原有手动语言选择记忆逻辑。
- 完成内容：新增图标资源 `site/assets/images/globe.svg`，并补充点击外部关闭/ESC 关闭下拉交互。
- 完成内容：地球图标方案验证截图：`output/playwright/pages-globe/.playwright-cli/page-2026-02-10T04-32-04-262Z.png`（闭合态）、`output/playwright/pages-globe/.playwright-cli/page-2026-02-10T04-32-38-666Z.png`（展开态）。
- 遗留事项：GitHub Pages 首次发布需在仓库 Settings 中确认 Source 为 GitHub Actions；部署后可继续补充真实 viewer 截图/GIF 与双语 FAQ。
- 完成内容：完成 3D 可视化现状与瓶颈梳理，形成“精致化 + 性能优化”专项规划基线（覆盖视觉层次、标签密度、覆盖层与网格线开销、缺少性能预算等问题）。
- 完成内容：新增《Viewer 3D 精致化与性能优化设计》（`doc/world-simulator/viewer-3d-polish-performance.md`），补齐目标、范围、接口/数据、里程碑、验收口径与风险。
- 完成内容：新增项目管理文档（`doc/world-simulator/viewer-3d-polish-performance.project.md`），完成任务拆解、依赖、状态与里程碑检查点定义。
- 完成内容：执行文档类变更自检（结构与命名规范符合当前仓库文档约定，单文档行数未超限制）。
- 遗留事项：按 `VPP3` 先落地性能基线采样（triad/llm 场景），建立可量化对比数据后再推进渲染分档与性能优化实现。
- 完成内容：执行 3D viewer 截图闭环（`llm_bootstrap`，地址 `127.0.0.1:5023`），产出基线截图 `/.tmp/screens/baseline/window-before-lighting.png`。
- 完成内容：定位并绕过本机并发 `cargo run` 造成的包锁阻塞（闭环脚本本次改用已编译二进制链路验证）；确认 `target/debug` 直跑会因 `assets/` 相对路径导致字体缺失，统一改回仓库根目录 `cargo run` 链路抓取有效画面。
- 完成内容：完成首轮渲染优化并通过测试：
  - `viewer_3d_config` 新增 lighting 配置（阴影开关、环境光亮度、补光比例），默认 `shadows=false` 以优先性能；
  - `main.rs` 接入 `GlobalAmbientLight` 与补光方向光；
  - `material_library.rs` 为 Location 材质增加按 `MaterialKind` 的轻量色彩分层，提升对象区分度。
- 完成内容：完成第二轮闭环截图验证，优化后截图 `/.tmp/screens/after4/window-after-color-pass-cwdfix.png`，与基线哈希不同，确认改动实际生效（基线 `b2388...` -> 优化后 `da1a57...`）。
- 完成内容：更新项目管理文档 `viewer-3d-polish-performance.project.md`，将 VPP3/VPP4/VPP10 标记为已完成，并同步阶段状态。
- 完成内容：执行验证：`env -u RUSTC_WRAPPER cargo fmt`、`env -u RUSTC_WRAPPER cargo test -p agent_world_viewer material_library -- --nocapture`、`env -u RUSTC_WRAPPER cargo test -p agent_world_viewer viewer_3d_config -- --nocapture`、`env -u RUSTC_WRAPPER cargo check`（均通过）。
- 遗留事项：继续推进 VPP5~VPP9（选中高亮强化、标签 LOD、覆盖层批处理/节流、性能摘要面板），并补充 triad 场景同口径闭环对比图。
- 完成内容：完成 Agent 渲染方式改造第一阶段：主体由球体替换为胶囊体（Capsule），保持 `height_cm` 到机体高度比例映射，避免“点状 Agent”难以区分。
- 完成内容：完成模块数量可视表达接入：
  - `Viewer3dScene` 新增 `agent_module_counts` 缓存，并在 Agent 选择摘要中展示 `modules={count}`；
  - Snapshot 重建时优先从 `module_visual_entities` 统计 Agent 模块数量；
  - 无可视模块实体时使用 `AgentBodyState::default().slots` 已安装数兜底；
  - Agent 上附加“模块节点环 + 模块数量立柱（上限16）”，强化数量感知。
- 完成内容：完成遮挡与可见性修正：
  - 新增 `agent_location_ids` 与 `location_radii_cm` 场景缓存，Agent 在 Location 表面上方并带横向偏移渲染，降低与 Location 球体重叠遮挡；
  - Agent 改为父节点容器 + 子节点主体/模块，移除父级非均匀缩放对子节点的连带影响；
  - 为 Agent 父节点补齐 `Visibility`，消除层级可见性告警。
- 完成内容：补充并通过测试：
  - `spawn_agent_entity_uses_body_height_scale`
  - `spawn_agent_entity_renders_module_markers_up_to_cap`
  - `rebuild_scene_maps_agent_module_count_from_module_visual_entities`
  - `rebuild_scene_uses_default_module_count_when_no_module_visual_entities`
- 完成内容：执行编译与测试校验（通过）：
  - `env -u RUSTC_WRAPPER cargo fmt`
  - `env -u RUSTC_WRAPPER cargo check -p agent_world_viewer`
  - `env -u RUSTC_WRAPPER cargo test -p agent_world_viewer spawn_agent_entity_uses_body_height_scale -- --nocapture`
  - `env -u RUSTC_WRAPPER cargo test -p agent_world_viewer spawn_agent_entity_renders_module_markers_up_to_cap -- --nocapture`
  - `env -u RUSTC_WRAPPER cargo test -p agent_world_viewer module_count -- --nocapture`
- 完成内容：执行截图闭环（手工串行链路）并产出对比图：
  - `/.tmp/manual-window-llm.png`
  - `/.tmp/manual-window-triad.png`
- 遗留事项：在默认 `2D` 俯视尺度下，模块节点已可见但仍偏细小；下一步建议补“默认 3D 视角闭环 + 模块类型分色/图例 + 可选模块夸张系数开关”，在不破坏物理口径的前提下进一步提升第一眼可读性。
- 完成内容：完成 Agent 模块渲染第二阶段“立方体拼接机器人”改造：
  - `scene_helpers.rs` 将模块布局升级为机器人槽位优先（头/肩/躯干/臂位）+ 超量环层补位；
  - 布局主轴改为在 `X/Z` 平面展开，适配默认 `2D` 俯视可读性；
  - 模块立方体尺寸与间距参数整体上调，并将模块材质改为高对比青色，降低与 Agent 主体/Location 的混色。
- 完成内容：补充并通过布局相关测试与回归校验：
  - `env -u RUSTC_WRAPPER cargo fmt`
  - `env -u RUSTC_WRAPPER cargo check -p agent_world_viewer`
  - `env -u RUSTC_WRAPPER cargo test -p agent_world_viewer spawn_agent_entity_uses_body_height_scale -- --nocapture`
  - `env -u RUSTC_WRAPPER cargo test -p agent_world_viewer spawn_agent_entity_renders_module_markers_up_to_cap -- --nocapture`
  - `env -u RUSTC_WRAPPER cargo test -p agent_world_viewer spawn_agent_entity_robot_layout_places_head_slot_first -- --nocapture`
  - `env -u RUSTC_WRAPPER cargo test -p agent_world_viewer module_count -- --nocapture`
- 完成内容：完成闭环截图复核并确认改动生效：
  - `/.tmp/manual-window-llm-cubes-v2.png`
  - `/.tmp/manual-window-triad-cubes-v2.png`
- 遗留事项：当前 2D 俯视下“模块拼接体”已可读，但“机器人轮廓”在远尺度仍偏紧凑；如需更强第一眼辨识，可继续追加“2D 模式模块可视化倍率”开关或默认 3D 视角预设。
- 完成内容：按“Agent 应只在 Location 表面”要求，修正 `agent_translation_for_render`：
  - 由“固定 Y 抬升 + 侧向偏移”改为“沿 Location 中心到 Agent 的径向法线贴附”；
  - 贴附半径采用 `location_radius + body_half_height + surface_gap`（仅保留极小防穿插间隙）。
- 完成内容：新增并通过表面贴附单测 `spawn_agent_entity_attaches_to_location_surface`，验证 Agent 机体中心到 Location 中心距离与理论半径差在小范围内。
- 完成内容：闭环截图复核（表面贴附版）：
  - `/.tmp/manual-window-llm-cubes-v3-surface.png`
