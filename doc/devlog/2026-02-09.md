- 日期：2026-02-09
- 完成内容：补齐 `agent_world_viewer` 对 `AgentDecisionTrace` 新增字段 `llm_effect_intents`、`llm_effect_receipts` 的测试构造兼容（`diagnosis.rs`、`timeline_controls.rs`、`tests.rs`、`tests_selection_details.rs`）。
- 完成内容：更新 `selection_linking.rs` 对新增事件 `LlmEffectQueued`/`LlmReceiptAppended` 的目标映射与 Agent 匹配分支，恢复枚举匹配穷尽性并保持选择联动可用。
- 完成内容：执行 `env -u RUSTC_WRAPPER cargo fmt --all -- --check`（通过）。
- 完成内容：执行 `env -u RUSTC_WRAPPER cargo test`（通过，全仓测试通过，含 `agent_world_viewer` 84 tests）。
- 遗留事项：无。
- 日期：2026-02-09
- 完成内容：新增《Viewer 文本可选中与复制能力设计》与项目管理文档（`doc/world-simulator/viewer-copyable-text.md`、`doc/world-simulator/viewer-copyable-text.project.md`）。
- 完成内容：`agent_world_viewer` 接入 `bevy_egui`，新增 `copyable_text.rs` 复制面板，聚合状态/选择/摘要/活动/详情/事件/诊断/联动/时间轴/覆盖层文本为可选中内容。
- 完成内容：Top Controls 新增“隐藏/显示复制窗”按钮，支持中英文文案切换并联动 `CopyableTextPanelState`。
- 完成内容：补充测试（`i18n.rs`、`panel_layout.rs`、`copyable_text.rs`），覆盖文案本地化与按钮开关行为。
- 完成内容：执行 `env -u RUSTC_WRAPPER cargo fmt --all -- --check`（通过）。
- 完成内容：执行 `env -u RUSTC_WRAPPER cargo check -p agent_world_viewer`（通过）。
- 完成内容：执行 `env -u RUSTC_WRAPPER cargo test -p agent_world_viewer`（通过，88 tests）。
- 遗留事项：可按需补充“复制内容分类筛选”与“一键复制当前分组”交互。
- 日期：2026-02-09
- 完成内容：按 UI 截图闭环流程复现并定位 `bevy_egui` 中文显示方块字问题（Bevy UI 正常、EGUI 异常）。
- 完成内容：在 `copyable_text.rs` 为 EGUI 注入 `ms-yahei.ttf`（`FontDefinitions` + `Proportional/Monospace` family），并将初始化改为一次性本地状态。
- 完成内容：去除复制面板文本 `monospace()` 强制样式，避免退回英文默认 monospace 字体导致 CJK 缺字。
- 完成内容：执行截图闭环 `./scripts/capture-viewer-frame.sh --scenario llm_bootstrap --addr 127.0.0.1:5024 --tick-ms 300 --viewer-wait 8`，确认 EGUI 中文可读。
- 完成内容：执行 `env -u RUSTC_WRAPPER cargo check -p agent_world_viewer`（通过）。
- 完成内容：执行定向测试（`copyable_text::tests::install_cjk_font_registers_font_and_priority`、`panel_layout::tests::copyable_panel_toggle_button_flips_state_and_label`、`i18n::tests::copyable_toggle_label_is_localized`，通过）。
- 遗留事项：可继续评估为 EGUI 单独保留 CJK monospace 字体（若后续需要严格等宽对齐展示）。
- 日期：2026-02-09
- 完成内容：补充复制面板中文标题纯逻辑测试 `copyable_text::tests::copy_panel_title_is_localized`，覆盖 `ZhCn/EnUs` 标题映射。
- 完成内容：小幅重构复制面板文案函数（`copy_panel_title` / `copy_panel_hint`）以支持可测试化并保持行为不变。
- 完成内容：执行 `env -u RUSTC_WRAPPER cargo fmt --all`（通过）。
- 完成内容：执行 `env -u RUSTC_WRAPPER cargo test -p agent_world_viewer copyable_text::tests::copy_panel_title_is_localized -- --exact`（通过）。
- 遗留事项：无。
