日期: 2026-02-14

完成内容:
1. 完成 M4 材料多账本与物流约束任务3（ABI 兼容、场景与收口）。
   - `agent_world_wasm_abi` 新增可选字段：
     - `RecipeExecutionRequest.available_inputs_by_ledger`
     - `FactoryBuildRequest.available_inputs_by_ledger`
   - 保留 `available_inputs` 旧字段，实现新旧 ABI 双通路兼容。
2. runtime 模块请求接入多账本视图。
   - `runtime/world/economy.rs` 在工厂建造与配方求值请求中注入 `available_inputs_by_ledger`。
   - 保持既有 `available_inputs` 语义不变，兼容旧模块决策逻辑。
3. 补齐兼容回归测试。
   - ABI 侧新增测试：验证新字段 round-trip 与旧请求缺省反序列化兼容。
   - runtime 侧新增测试文件 `runtime/tests/economy_module_requests.rs`：
     - `build_factory_with_module_request_exposes_available_inputs_by_ledger`
     - `schedule_recipe_with_module_request_exposes_available_inputs_by_ledger`
   - 为满足“单个 Rust 文件不超过 1200 行”约束，将请求捕获相关测试拆分出 `economy.rs`。
4. 场景与项目文档收口。
   - 更新 `doc/world-simulator/scenario-files.md`，增加“物流瓶颈验证口径（2026-02-14）”。
   - 更新 `doc/world-simulator/material-multi-ledger-logistics.project.md`，任务3清单标记完成并更新状态。

验证:
1. `env -u RUSTC_WRAPPER cargo fmt --all`
2. `env -u RUSTC_WRAPPER cargo test -p agent_world_wasm_abi economy::tests:: -- --nocapture`
3. `env -u RUSTC_WRAPPER cargo test -p agent_world runtime::tests::economy_module_requests:: -- --nocapture`
4. `env -u RUSTC_WRAPPER cargo test -p agent_world runtime::tests::economy:: -- --nocapture`

遗留事项:
1. 当前三阶段任务已全部完成，后续可按需求继续细化物流网络（路由/拥塞/容量分层）与场景级自动化压测。
