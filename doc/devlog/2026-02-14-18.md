日期: 2026-02-14

完成内容:
1. 完成 M4-E7 Product 模块在线校验接线。
   - 在 `agent_world_wasm_abi` 新增 `ProductValidationRequest` 与 `ProductValidationDecision`。
   - 将 `ProductModuleApi` 统一为 `evaluate_product(req) -> ProductValidationDecision`。
   - runtime 新增动作 `ValidateProduct`、`ValidateProductWithModule`，并新增领域事件 `ProductValidated`。
   - 在 `step_with_modules` 中新增 Product 模块求值流程，解析 emit kind `economy.product_validation`，并将模块拒绝映射到 `ActionRejected(RuleDenied)`。
2. 补齐 runtime 回归测试。
   - `validate_product_with_module_uses_module_decision`
   - `validate_product_with_module_rejects_when_module_denies`
3. 回写文档。
   - 更新 `doc/m4-industrial-economy-wasm.md`（接口草案、动作/事件协议、当前实现进展）。
   - 更新 `doc/m4-industrial-economy-wasm.project.md`（E7 勾选完成，新增 E8 下一任务）。
   - 更新 `doc/world-simulator.md` 与 `doc/world-simulator.project.md` 的 M4 状态。
4. 测试与检查通过。
   - `cargo fmt --all`
   - `env -u RUSTC_WRAPPER cargo test -p agent_world_wasm_abi`
   - `env -u RUSTC_WRAPPER cargo test -p agent_world runtime::tests::economy -- --nocapture`
   - `env -u RUSTC_WRAPPER cargo test -p agent_world --features wasmtime runtime::tests::economy -- --nocapture`
   - `env -u RUSTC_WRAPPER cargo check -p agent_world --features wasmtime`

遗留事项:
1. E8: 将 Product 校验从“显式动作”推进为“配方完工自动触发 + 入账门禁”。
2. 设计并实现“产物 -> Product 模块”解析策略，支持内置规则与后续扩展。
