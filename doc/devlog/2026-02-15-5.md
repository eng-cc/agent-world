- 日期：2026-02-15
- 完成内容：完成 BWD-2~BWD-5（Builtin Wasm DistFS 存储与提交前校验）代码落地。
  - 脚本改造：
    - `scripts/sync-m1-builtin-wasm-artifacts.sh` 改为“build -> hash manifest 校验 -> DistFS 落盘（`.distfs/builtin_wasm/blobs/<sha256>.blob`）”，并保持 `--check` 作为提交前门禁入口。
    - `scripts/sync-m4-builtin-wasm-artifacts.sh` 同步改造为复用新行为。
  - 提交前链路改造：
    - `scripts/pre-commit.sh` 显式接入 `sync-m1/m4 --check`，并以 `CI_SKIP_BUILTIN_WASM_CHECKS=1` 调用 `scripts/ci-tests.sh required` 避免重复执行。
    - `scripts/ci-tests.sh` 增加 `CI_SKIP_BUILTIN_WASM_CHECKS` 开关，默认保持 CI 校验不变。
  - 运行时改造：
    - `crates/agent_world/src/runtime/m1_builtin_wasm_artifact.rs`
    - `crates/agent_world/src/runtime/m4_builtin_wasm_artifact.rs`
    - `crates/agent_world/src/runtime/world/bootstrap_power.rs`
    - `crates/agent_world/src/runtime/world/bootstrap_economy.rs`
    - 从 `include_bytes!` 嵌入改为“按 git 追踪 hash 清单从 DistFS blob 读取 + SHA-256 校验”。
  - git 追踪策略改造：
    - 移除 `crates/agent_world/src/runtime/world/artifacts/m1_builtin_modules/*.wasm` 与 `m4_builtin_modules/*.wasm` 的 git 追踪。
    - 更新 `.gitignore`，忽略 `.distfs/` 与上述 wasm 路径。
- 完成内容：更新文档状态。
  - 更新 `doc/scripts/pre-commit.md`、`doc/scripts/pre-commit.project.md`（说明 pre-commit 已恢复 wasm 校验并接入 DistFS 落盘）。
  - 更新 `doc/world-runtime/builtin-wasm-distfs-storage.project.md`（BWD-2~BWD-6 勾选完成）。
- 完成内容：执行并通过回归验证（test_tier_required）。
  - `./scripts/sync-m1-builtin-wasm-artifacts.sh --check`
  - `./scripts/sync-m4-builtin-wasm-artifacts.sh --check`
  - `env -u RUSTC_WRAPPER cargo check -p agent_world --features wasmtime`
  - `CI_VERBOSE=1 ./scripts/ci-tests.sh required`
- 遗留事项：当前任务无遗留；如后续需要将 DistFS blob 迁移到远端分发，可在新任务中扩展拉取与签名治理。
