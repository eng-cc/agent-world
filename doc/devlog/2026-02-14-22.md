# 2026-02-14 任务日志（test case feature 标签分级）

## 日期
- 2026-02-14

## 完成内容
- 在 `agent_world` crate 新增测试分级 feature：
  - `test_tier_required`
  - `test_tier_full`（包含 `test_tier_required`）
- 为 `crates/agent_world/tests/` 关键 integration test case 添加分级标签：
  - `#[cfg(feature = "test_tier_required")]`：提交/PR 必跑 smoke case
  - `#[cfg(feature = "test_tier_full")]`：每日全量回归 case
- 改造 `scripts/ci-tests.sh`：
  - `required`：静态门禁 + `test_tier_required` case 目标集合
  - `full`：`test_tier_full` case + `wasmtime`（`--lib --bins`）+ `libp2p` 回归
- 清理 feature 分级引入后的测试导入噪音，按 feature 条件化部分 import。
- 回写文档：
  - `doc/testing/ci-testcase-tiering.md`
  - `doc/testing/ci-testcase-tiering.project.md`
  - `doc/testing/ci-test-coverage.md`
  - `doc/testing/ci-tiered-execution.md`
  - `doc/scripts/pre-commit.md`

## 验证
- `./scripts/ci-tests.sh required`
- `./scripts/ci-tests.sh full`
- `env -u RUSTC_WRAPPER cargo test -p agent_world --features wasmtime --lib --bins`

## 遗留事项
- 当前仅对 `agent_world` integration tests 完成 case 级 feature 标签；后续可扩展到其他 crate 的测试目标。
