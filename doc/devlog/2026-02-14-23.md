# 2026-02-14 任务日志（移除 ci-tests.sh 中硬编码 --test 清单）

## 日期
- 2026-02-14

## 完成内容
- 调整 `scripts/ci-tests.sh`：
  - `required` 改为 `cargo test -p agent_world --tests --features test_tier_required`。
  - `full` 改为 `cargo test -p agent_world --tests --features test_tier_full,wasmtime,viewer_live_integration`。
  - 删除脚本中的硬编码 `--test module_xxx` 列表，改为 feature 标签自动过滤。
- 为 integration test 文件补充 crate 级门控，避免无关 feature 下构建/警告噪音：
  - `#![cfg(any(feature = "test_tier_required", feature = "test_tier_full"))]`
  - `viewer_live_integration` 改为 `#![cfg(all(feature = "viewer_live_integration", feature = "test_tier_full"))]`
  - `wasm_executor` 改为 `#![cfg(all(feature = "wasmtime", feature = "test_tier_full"))]`
- 文档回写：
  - `doc/testing/ci-test-coverage.md`
  - `doc/testing/ci-testcase-tiering.md`
  - `doc/testing/ci-testcase-tiering.project.md`

## 验证
- `env -u RUSTC_WRAPPER cargo fmt --all`
- `./scripts/ci-tests.sh required`
- `./scripts/ci-tests.sh full`

## 遗留事项
- 目前 feature 标签分级主要覆盖 `agent_world` crate；后续可按同样模式扩展到其他 crate 的 tests。
