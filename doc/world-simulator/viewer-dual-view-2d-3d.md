# Viewer 双视角（2D/3D）切换设计

## 目标
- 在 `agent_world_viewer` 中提供 **2D 全局视角** 与 **3D 透视视角** 的一键切换。
- 默认进入 2D 视角，优先保障“开箱即看全局态势”的可观察性。
- 保持现有 3D 场景对象/事件联动不变，仅调整相机观察方式与右侧交互入口。
- 将 Agent 默认颜色调为更鲜艳，提升在复杂背景上的可辨识度。

## 范围
- **范围内**
  - 新增 viewer 运行时相机视角模式资源（2D/3D）。
  - Viewer 启动默认采用 2D 全局视角。
  - 右侧 EGUI 顶部增加“2D / 3D”切换按钮。
  - 2D 模式下相机固定俯视（仅保留平移/缩放），用于全局观察。
  - 3D 模式恢复透视轨道视角（旋转/平移/缩放）。
  - 提升 Agent 材质颜色饱和度与亮度。
- **范围外**
  - 不修改 viewer 协议与世界事件模型。
  - 不引入新的渲染管线或地图底图。
  - 不重构右侧面板信息架构（仅新增视角切换入口）。

## 接口 / 数据

### 1) 视角模式资源
- 新增 `ViewerCameraMode`：
  - `TwoD`：俯视全局。
  - `ThreeD`：透视轨道。
- 默认值：`TwoD`。

### 2) 相机行为
- 初始化相机时读取 `ViewerCameraMode`，构建对应初始 `OrbitCamera` 参数。
- 新增相机同步系统：
  - 在模式切换时写入对应预设（focus/yaw/pitch/radius）。
  - 在 2D 模式下限制旋转输入，保持俯视稳定。

### 3) UI 入口
- 在 `egui_right_panel` 顶部控制区新增 2D/3D 切换按钮。
- 按钮状态与 `ViewerCameraMode` 双向绑定（点击即更新资源）。
- 增补 i18n 文案函数（视角标题与按钮标签）。

### 4) 视觉样式
- 调整 `agent_material.base_color` 为更鲜艳配色，提高目标识别度。

## 里程碑
- **DV1**：完成设计/项目文档。
- **DV2**：落地 `ViewerCameraMode`、默认 2D 与相机同步逻辑。
- **DV3**：落地右侧面板 2D/3D 切换按钮与 i18n。
- **DV4**：调整 Agent 颜色并补齐测试。
- **DV5**：通过格式化、编译、测试回归并更新日志。

## 风险
- **相机交互冲突**：2D/3D 输入逻辑不分离可能导致俯视模式被误旋转。
  - 缓解：2D 模式显式禁用旋转，并在系统中强制俯视参数。
- **模式切换突兀**：切换时相机跳变影响操作连续性。
  - 缓解：采用稳定预设，优先保证“全局可见”和“可控”。
- **配色过饱和**：颜色过亮可能干扰其它信息层。
  - 缓解：仅提升 Agent 色彩，不调整 Location/Overlay 配色，并通过截图回看。
